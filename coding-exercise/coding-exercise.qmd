---
title: "R Coding Exercise"
---

install.packages("dslabs")
library("dslabs")

help(gapminder)

#Used to examine struture/layout of data
str(gapminder)

#Used to examine data summary
summary(gapminder)

class(gapminder)

# Downloaded tidyverse packages to make it easier to code
install.packages("tidyverse")
library("tidyverse")

# Generate new objects containing values for African countries only
africadata <- gapminder %>%
  filter(continent == "Africa")
africadata <- africadata %>% filter(continent == "Africa")

# Using str and summary to view structure and summary of new object "africadata"
str(africadata)
summary(africadata)

# Create a new object with life expectancy and infant mortality from africadata
africa_infanmort_lifexpect <- africadata %>%
  select(infant_mortality, life_expectancy)

# View structure and summary of the mortality and life expectancy data
str(africa_infanmort_lifexpect)
summary(africa_infanmort_lifexpect)

# Create a new object with population and life expectancy from African data
africa_pop_lifexpect2 <- africadata %>%
  select(population, life_expectancy)

# View structure and summary of the population and life expectancy data
str(africa_pop_lifexpect2)
summary(africa_pop_lifexpect2)


#plot life expectancy as a function of infant mortality and as a function of population size

library("ggplot2")

# Plot life expectancy as a function of infant mortality
Africa_LE_vs_IM <- ggplot(africa_infanmort_lifexpect, aes(x = infant_mortality, y = life_expectancy)) +
  geom_point() +
  theme_minimal() +
  labs(title = "Life Expectancy vs Infant Mortality",
       x = "Infant Mortality",
       y = "Life Expectancy")
       

# Plot life expectancy vs population with population on a log scale
Africa_LE_vs_Pop_log <- ggplot(africa_pop_lifexpect2, aes(x = population, y = life_expectancy)) +
    geom_point() +
    theme_minimal() +
    labs(title = "Life Expectancy vs Population",
         x = "Population (Log Scale)",
         y = "Life Expectancy")
scale_x_log10()
plot(Africa_LE_vs_Pop_log)
# The streaks you see in the graph are because there appears to be a general trend for countries with larger populations to have higher life expectancies. 

# Identifying years without missing values for infant mortality
## Installed "dplyr to use group_by()
```{r}
#code that figures out which years have missing data for infant mortality
install.packages("dplyr")
library("dplyr")
africadata %>%
  group_by(year) %>%
  summarize(missing_infant_mortality = sum(is.na(infant_mortality))) %>%
  filter(missing_infant_mortality > 0)
```

## creating object from africadata for the year 2000

```{r}
# Filter data for year == 2000
africa2000 <- africadata %>%
  filter(year == 2000)

#Examine the structure and summary of object africa2000
str(africa2000)
summary(africa2000)
```

## new plots using only data from the year 2000 in the africadata file
```{r}
# plot infant mortality vs life expectancy for year=2000
LE_vs_IM_2000 <- ggplot(africa2000, aes(x = infant_mortality, y = life_expectancy)) +
  geom_point() +
  theme_minimal() +
  labs(title = "Life Expectancy vs Infant Mortality, year=2000",
       x = "Infant Mortality",
       y = "Life Expectancy")
plot(LE_vs_IM_2000)

# plot life expectancy vs population (log10) for year=2000
LE_vs_Pop_log_2000 <- ggplot(africa2000, aes(x = population, y = life_expectancy)) +
    geom_point() +
    theme_minimal() +
    labs(title = "Life Expectancy vs Population Year = 2000",
         x = "Population (Log Scale)",
         y = "Life Expectancy") +
    scale_x_log10()

plot(LE_vs_Pop_log_2000)

```

# Using lm() to create fit life expectancy as the outcome, and infant mortality as the predictor
```{r}
fit1 <- lm(life_expectancy ~ infant_mortality, data = africa2000)

summary(fit1)


```
## Using lm() to fit life expectancy as the outcome, and population size as the predictor
```{r}
fit2 <- lm(life_expectancy ~ population, data = africa2000)

summary(fit2)

```
# Interpreting the results for the linear models
# Fit1 demonstrates the relationship between life expectancy and infant mortality using the gapminder database, selecting for African counries in the year 2000. The low p-value of 2.826e-08, suggests there is a statistically significant relationship between life expectancy and infant mortality

# Fit2 demonstrates the relationship between life expectancy and population size using the gapminder database, selecting for African counries in the year 2000. The high p-value of 0.6159, suggests there is not a statistically signicant relationship between life expectancy and population size. 
